<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<title>Fun with Travis CI - Dev&Ops</title>
<meta name=description content="Ok, I need to swallow my own words on this one. Yesterday I stated the following on twitter:
I was thinking of writing a blogpost about building with @travisci, but it is so easy to use that I don't see the point. #greatProject #CI
&mdash; Andreas Mosti (@amostii) October 19, 2015  So, yeah.
Recently I have been playing a lot with Travis CI for building my open source projects directly from GitHub.">
<meta name=author content="Andreas Mosti">
<link rel="preload stylesheet" as=style href=https://andmos.github.io/blog.amosti.net/app.min.css>
<link rel=preload as=image href=https://andmos.github.io/blog.amosti.net/theme.png>
<link rel=preload as=image href=https://andmos.github.io/blog.amosti.net/twitter.svg>
<link rel=preload as=image href=https://andmos.github.io/blog.amosti.net/github.svg>
<link rel=icon href=https://andmos.github.io/blog.amosti.net/favicon.ico>
<link rel=apple-touch-icon href=https://andmos.github.io/blog.amosti.net/apple-touch-icon.png>
<meta name=generator content="Hugo 0.92.1">
<meta property="og:title" content="Fun with Travis CI">
<meta property="og:description" content="Ok, I need to swallow my own words on this one. Yesterday I stated the following on twitter:
I was thinking of writing a blogpost about building with @travisci, but it is so easy to use that I don't see the point. #greatProject #CI
&mdash; Andreas Mosti (@amostii) October 19, 2015  So, yeah.
Recently I have been playing a lot with Travis CI for building my open source projects directly from GitHub.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://andmos.github.io/blog.amosti.net/post/fun-with-travis-ci/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2015-10-20T18:23:32+00:00">
<meta property="article:modified_time" content="2015-10-20T18:23:32+00:00">
<meta itemprop=name content="Fun with Travis CI">
<meta itemprop=description content="Ok, I need to swallow my own words on this one. Yesterday I stated the following on twitter:
I was thinking of writing a blogpost about building with @travisci, but it is so easy to use that I don't see the point. #greatProject #CI
&mdash; Andreas Mosti (@amostii) October 19, 2015  So, yeah.
Recently I have been playing a lot with Travis CI for building my open source projects directly from GitHub."><meta itemprop=datePublished content="2015-10-20T18:23:32+00:00">
<meta itemprop=dateModified content="2015-10-20T18:23:32+00:00">
<meta itemprop=wordCount content="383">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Fun with Travis CI">
<meta name=twitter:description content="Ok, I need to swallow my own words on this one. Yesterday I stated the following on twitter:
I was thinking of writing a blogpost about building with @travisci, but it is so easy to use that I don't see the point. #greatProject #CI
&mdash; Andreas Mosti (@amostii) October 19, 2015  So, yeah.
Recently I have been playing a lot with Travis CI for building my open source projects directly from GitHub.">
</head>
<body class=not-ready data-menu=true>
<header class=header>
<p class=logo>
<a class=site-name href=https://andmos.github.io/blog.amosti.net>Dev&Ops</a><a class=btn-dark></a>
</p>
<script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=a=>{bodyClx[a?'add':'remove']('dark'),localStorage.setItem('dark',a?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',a=>setDark(a.matches))</script>
<nav class=menu>
<a href=/blog.amosti.net/about/>About Andreas</a>
</nav>
<nav class=social>
<a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/amostii target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/andmos target=_blank></a>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-title>
<p>
<time>Oct 20, 2015</time>
<span>Andreas Mosti</span>
</p>
<h1>Fun with Travis CI</h1>
</header>
<section class=post-content><p>Ok, I need to swallow my own words on this one. Yesterday I stated the following on twitter:</p>
<blockquote class=twitter-tweet lang=en><p lang=en dir=ltr>I was thinking of writing a blogpost about building with <a href=https://twitter.com/travisci>@travisci</a>, but it is so easy to use that I don't see the point. <a href="https://twitter.com/hashtag/greatProject?src=hash">#greatProject</a> <a href="https://twitter.com/hashtag/CI?src=hash">#CI</a></p>&mdash; Andreas Mosti (@amostii) <a href=https://twitter.com/amostii/status/656205920922390528>October 19, 2015</a></blockquote>
<script async src=//platform.twitter.com/widgets.js></script>
<p>So, yeah.</p>
<p>Recently I have been playing a lot with <a href=https://travis-ci.com/>Travis CI</a> for building my open source projects directly from <a href=https://github.com/>GitHub</a>. All you need to get it working is to add a simple <code>.travis.yml</code> file to the root folder of the project you want to build, where the steps required to build the project is described. Typically it will look something like this:</p>
<pre><code>language: csharp
mono:
  - latest
  - 3.12.0
  - 3.10.0
solution: solution-name.sln
install:
  - nuget restore solution-name.sln
  - nuget install NUnit.Runners -Version 2.6.4 -OutputDirectory testrunner
script:
  - xbuild /p:Configuration=Release solution-name.sln
  - mono ./testrunner/NUnit.Runners.2.6.4/tools/nunit-console.exe ./MyPoject.Tests/bin/Release/MyProject.Tests.dll
</code></pre>
<p>As my tweet stated, this is really easy to understand just from looking at the file. We select a language, pick out some runtime versions to build on, select a solution, grab some dependencies, run the build and run some tests. commit some code and the build starts. Simple and powerful, as it should be.</p>
<p>Personally, I prefer to add a <code>build.sh</code> file to all my project, which makes it all even easier:</p>
<pre><code>language: csharp
mono:
  - latest
  - 3.12.0
  - 3.10.0
before_script:
    - chmod +x build.sh
script:
  - ./build.sh compile
  - ./build.sh test
</code></pre>
<p>Normally Travis CI uses <a href=http://docs.travis-ci.com/user/migrating-from-legacy/#How-can-I-use-container-based-infrastructure%3F>container technology to spawn these builds fast</a>, but there is nothing wrong with using containers for yourself in the build:</p>
<pre><code>language: csharp
sudo: required
services:
  - docker
before_script:
  - chmod +x buildServer
  - ./build.sh build-local
  - ./build.sh build-docker
  - ./build.sh run-docker
script:
  - ./build.sh unit-local
  - ./build.sh integration-local
</code></pre>
<p>Now this solution I like a lot. Here we allow the use of <a href=https://www.docker.com/>Docker</a> thanks to the <code>sudo: required</code> and the <code>-docker</code> service. Next up we run a regular compile-build both directly on the host and in a Docker-container, before starting this container. The container allows us to run integration-tests against newly built code fast, without the need to deploy it on another server, making the build more efficient and keeps complexity low. The build test the entire solution from compile to deploy, all in a few lines of code.</p>
</section>
<nav class=post-nav>
<a class=prev href=https://andmos.github.io/blog.amosti.net/post/trondheim-developer-conference/><span>←</span><span>Trondheim Developer Conference 2015</span></a>
<a class=next href=https://andmos.github.io/blog.amosti.net/post/build-and-publish-asciidoc-with-docker-and-nginx/><span>Build and publish AsciiDoc with Docker and nginx</span><span>→</span></a>
</nav>
</article>
</main>
<footer class=footer>
<p>&copy; 2022 <a href=https://andmos.github.io/blog.amosti.net>Dev&Ops</a></p>
<p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p>
<p>
<a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a>
</p>
</footer>
</body>
</html>