<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<title>Updating a SolrCloud schema in a live enviroment - Dev&Ops</title>
<meta name=description content="I can guarantee this will happen to you at some point: You find out that you need to add some more feilds in a Solr schema becouse you want to index some more data from you&rsquo;re documents. Does that mean taking down the live nodes, changing the schema and then start them up again? Thankfully, no. With the help of Zookeeper and the Solr schema REST API we can do this live without any pain.">
<meta name=author content="Andreas Mosti">
<link rel="preload stylesheet" as=style href=https://andmos.github.io/blog.amosti.net/app.min.css>
<link rel=preload as=image href=https://andmos.github.io/blog.amosti.net/theme.png>
<link rel=preload as=image href=https://andmos.github.io/blog.amosti.net/twitter.svg>
<link rel=preload as=image href=https://andmos.github.io/blog.amosti.net/github.svg>
<link rel=icon href=https://andmos.github.io/blog.amosti.net/favicon.ico>
<link rel=apple-touch-icon href=https://andmos.github.io/blog.amosti.net/apple-touch-icon.png>
<meta name=generator content="Hugo 0.92.1">
<meta property="og:title" content="Updating a SolrCloud schema in a live enviroment">
<meta property="og:description" content="I can guarantee this will happen to you at some point: You find out that you need to add some more feilds in a Solr schema becouse you want to index some more data from you&rsquo;re documents. Does that mean taking down the live nodes, changing the schema and then start them up again? Thankfully, no. With the help of Zookeeper and the Solr schema REST API we can do this live without any pain.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://andmos.github.io/blog.amosti.net/post/updating-a-solrcloud-schema-in-a-live-enviroment/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2015-04-25T10:52:10+00:00">
<meta property="article:modified_time" content="2015-04-25T10:52:10+00:00">
<meta itemprop=name content="Updating a SolrCloud schema in a live enviroment">
<meta itemprop=description content="I can guarantee this will happen to you at some point: You find out that you need to add some more feilds in a Solr schema becouse you want to index some more data from you&rsquo;re documents. Does that mean taking down the live nodes, changing the schema and then start them up again? Thankfully, no. With the help of Zookeeper and the Solr schema REST API we can do this live without any pain."><meta itemprop=datePublished content="2015-04-25T10:52:10+00:00">
<meta itemprop=dateModified content="2015-04-25T10:52:10+00:00">
<meta itemprop=wordCount content="121">
<meta itemprop=keywords content>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Updating a SolrCloud schema in a live enviroment">
<meta name=twitter:description content="I can guarantee this will happen to you at some point: You find out that you need to add some more feilds in a Solr schema becouse you want to index some more data from you&rsquo;re documents. Does that mean taking down the live nodes, changing the schema and then start them up again? Thankfully, no. With the help of Zookeeper and the Solr schema REST API we can do this live without any pain.">
</head>
<body class=not-ready data-menu=true>
<header class=header>
<p class=logo>
<a class=site-name href=https://andmos.github.io/blog.amosti.net>Dev&Ops</a><a class=btn-dark></a>
</p>
<script>let bodyClx=document.body.classList,btnDark=document.querySelector('.btn-dark'),sysDark=window.matchMedia('(prefers-color-scheme: dark)'),darkVal=localStorage.getItem('dark'),setDark=a=>{bodyClx[a?'add':'remove']('dark'),localStorage.setItem('dark',a?'yes':'no')};setDark(darkVal?darkVal==='yes':sysDark.matches),requestAnimationFrame(()=>bodyClx.remove('not-ready')),btnDark.addEventListener('click',()=>setDark(!bodyClx.contains('dark'))),sysDark.addEventListener('change',a=>setDark(a.matches))</script>
<nav class=menu>
<a href=/blog.amosti.net/about/>About Andreas</a>
</nav>
<nav class=social>
<a class=twitter style=--url:url(./twitter.svg) href=https://twitter.com/amostii target=_blank></a>
<a class=github style=--url:url(./github.svg) href=https://github.com/andmos target=_blank></a>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-title>
<p>
<time>Apr 25, 2015</time>
<span>Andreas Mosti</span>
</p>
<h1>Updating a SolrCloud schema in a live enviroment</h1>
</header>
<section class=post-content><p>I can guarantee this will happen to you at some point: You find out that you need to add some more feilds in a Solr schema becouse you want to index some more data from you&rsquo;re documents. Does that mean taking down the live nodes, changing the schema and then start them up again? Thankfully, no. With the help of <a href=https://zookeeper.apache.org/>Zookeeper</a> and the <a href=https://cwiki.apache.org/confluence/display/solr/Schema+API>Solr schema REST API</a> we can do this live without any pain.</p>
<p>###The API calls:</p>
<p>First of, let&rsquo;s update the new config to the zookeeper:</p>
<pre><code>	./zkcli.sh -zkhost myZookeeper:2181 -cmd upconfig -confname myConfig -confdir /path/to/my/conf/
</code></pre>
<p>Then just reload the core (I do this on the shard leader out of habit):</p>
<pre><code>	curl http://mySolrNode:8983/solr/admin/cores?action=reload&amp;core=myCore
</code></pre>
<p>This trick has saved me many times.</p>
</section>
<nav class=post-nav>
<a class=prev href=https://andmos.github.io/blog.amosti.net/post/easy-way-to-upgrade-docker/><span>←</span><span>Easy way to upgrade Docker</span></a>
<a class=next href=https://andmos.github.io/blog.amosti.net/post/zookeeper-aware-application-server/><span>Zookeeper-aware application server</span><span>→</span></a>
</nav>
</article>
</main>
<footer class=footer>
<p>&copy; 2022 <a href=https://andmos.github.io/blog.amosti.net>Dev&Ops</a></p>
<p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p>
<p>
<a href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Paper 5.1</a>
</p>
</footer>
</body>
</html>